!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).DDDD=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&s(e,n)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function s(e,n){return s=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},s(e,n)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,n,t){return l=a()?Reflect.construct:function(e,n,t){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return t&&s(o,t.prototype),o},l.apply(null,arguments)}function u(e){var n="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,i)}function i(){return l(e,arguments,r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,e)},u(e)}function d(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){var n=a();return function(){var t,i=r(e);if(n){var o=r(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return d(this,t)}}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var i,o,r=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(i=t.next()).done)&&(r.push(i.value),!n||r.length!==n);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==t.return||t.return()}finally{if(a)throw o}}return r}(e,n)||v(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){if(e){if("string"==typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function _(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=v(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw r}}}}
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var g=Object.prototype.toString,y=Array.isArray||function(e){return"[object Array]"===g.call(e)};function m(e){return"function"==typeof e}function b(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k(e,n){return null!=e&&"object"==typeof e&&n in e}var w=RegExp.prototype.test;var x=/\S/;function H(e){return!function(e,n){return w.call(e,n)}(x,e)}var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var E=/\s*/,C=/\s+/,$=/\s*=/,z=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;function M(e){this.string=e,this.tail=e,this.pos=0}function I(e,n){this.view=e,this.cache={".":this.view},this.parent=n}function D(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}M.prototype.eos=function(){return""===this.tail},M.prototype.scan=function(e){var n=this.tail.match(e);if(!n||0!==n.index)return"";var t=n[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t},M.prototype.scanUntil=function(e){var n,t=this.tail.search(e);switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},I.prototype.push=function(e){return new I(e,this)},I.prototype.lookup=function(e){var n,t,i,o=this.cache;if(o.hasOwnProperty(e))n=o[e];else{for(var r,s,a,l=this,u=!1;l;){if(e.indexOf(".")>0)for(r=l.view,s=e.split("."),a=0;null!=r&&a<s.length;)a===s.length-1&&(u=k(r,s[a])||(t=r,i=s[a],null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(i))),r=r[s[a++]];else r=l.view[e],u=k(l.view,e);if(u){n=r;break}l=l.parent}o[e]=n}return m(n)&&(n=n.call(this.view)),n},D.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},D.prototype.parse=function(e,n){var t=this.templateCache,i=e+":"+(n||V.tags).join(":"),o=void 0!==t,r=o?t.get(i):void 0;return null==r&&(r=function(e,n){if(!e)return[];var t,i,o,r=!1,s=[],a=[],l=[],u=!1,d=!1,c="",h=0;function p(){if(u&&!d)for(;l.length;)delete a[l.pop()];else l=[];u=!1,d=!1}function v(e){if("string"==typeof e&&(e=e.split(C,2)),!y(e)||2!==e.length)throw new Error("Invalid tags: "+e);t=new RegExp(b(e[0])+"\\s*"),i=new RegExp("\\s*"+b(e[1])),o=new RegExp("\\s*"+b("}"+e[1]))}v(n||V.tags);for(var f,_,g,m,k,w,x=new M(e);!x.eos();){if(f=x.pos,g=x.scanUntil(t))for(var L=0,I=g.length;L<I;++L)H(m=g.charAt(L))?(l.push(a.length),c+=m):(d=!0,r=!0,c+=" "),a.push(["text",m,f,f+1]),f+=1,"\n"===m&&(p(),c="",h=0,r=!1);if(!x.scan(t))break;if(u=!0,_=x.scan(S)||"name",x.scan(E),"="===_?(g=x.scanUntil($),x.scan($),x.scanUntil(i)):"{"===_?(g=x.scanUntil(o),x.scan(z),x.scanUntil(i),_="&"):g=x.scanUntil(i),!x.scan(i))throw new Error("Unclosed tag at "+x.pos);if(k=">"==_?[_,g,f,x.pos,c,h,r]:[_,g,f,x.pos],h++,a.push(k),"#"===_||"^"===_)s.push(k);else if("/"===_){if(!(w=s.pop()))throw new Error('Unopened section "'+g+'" at '+f);if(w[1]!==g)throw new Error('Unclosed section "'+w[1]+'" at '+f)}else"name"===_||"{"===_||"&"===_?d=!0:"="===_&&v(g)}if(p(),w=s.pop())throw new Error('Unclosed section "'+w[1]+'" at '+x.pos);return function(e){for(var n,t=[],i=t,o=[],r=0,s=e.length;r<s;++r)switch((n=e[r])[0]){case"#":case"^":i.push(n),o.push(n),i=n[4]=[];break;case"/":o.pop()[5]=n[2],i=o.length>0?o[o.length-1][4]:t;break;default:i.push(n)}return t}(function(e){for(var n,t,i=[],o=0,r=e.length;o<r;++o)(n=e[o])&&("text"===n[0]&&t&&"text"===t[0]?(t[1]+=n[1],t[3]=n[3]):(i.push(n),t=n));return i}(a))}(e,n),o&&t.set(i,r)),r},D.prototype.render=function(e,n,t,i){var o=this.getConfigTags(i),r=this.parse(e,o),s=n instanceof I?n:new I(n,void 0);return this.renderTokens(r,s,t,e,i)},D.prototype.renderTokens=function(e,n,t,i,o){for(var r,s,a,l="",u=0,d=e.length;u<d;++u)a=void 0,"#"===(s=(r=e[u])[0])?a=this.renderSection(r,n,t,i,o):"^"===s?a=this.renderInverted(r,n,t,i,o):">"===s?a=this.renderPartial(r,n,t,o):"&"===s?a=this.unescapedValue(r,n):"name"===s?a=this.escapedValue(r,n,o):"text"===s&&(a=this.rawValue(r)),void 0!==a&&(l+=a);return l},D.prototype.renderSection=function(e,n,t,i,o){var r=this,s="",a=n.lookup(e[1]);if(a){if(y(a))for(var l=0,u=a.length;l<u;++l)s+=this.renderTokens(e[4],n.push(a[l]),t,i,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)s+=this.renderTokens(e[4],n.push(a),t,i,o);else if(m(a)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");a=a.call(n.view,i.slice(e[3],e[5]),(function(e){return r.render(e,n,t,o)})),null!=a&&(s+=a)}else s+=this.renderTokens(e[4],n,t,i,o);return s}},D.prototype.renderInverted=function(e,n,t,i,o){var r=n.lookup(e[1]);if(!r||y(r)&&0===r.length)return this.renderTokens(e[4],n,t,i,o)},D.prototype.indentPartial=function(e,n,t){for(var i=n.replace(/[^ \t]/g,""),o=e.split("\n"),r=0;r<o.length;r++)o[r].length&&(r>0||!t)&&(o[r]=i+o[r]);return o.join("\n")},D.prototype.renderPartial=function(e,n,t,i){if(t){var o=this.getConfigTags(i),r=m(t)?t(e[1]):t[e[1]];if(null!=r){var s=e[6],a=e[5],l=e[4],u=r;0==a&&l&&(u=this.indentPartial(r,l,s));var d=this.parse(u,o);return this.renderTokens(d,n,t,u,i)}}},D.prototype.unescapedValue=function(e,n){var t=n.lookup(e[1]);if(null!=t)return t},D.prototype.escapedValue=function(e,n,t){var i=this.getConfigEscape(t)||V.escape,o=n.lookup(e[1]);if(null!=o)return"number"==typeof o&&i===V.escape?String(o):i(o)},D.prototype.rawValue=function(e){return e[1]},D.prototype.getConfigTags=function(e){return y(e)?e:e&&"object"==typeof e?e.tags:void 0},D.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!y(e)?e.escape:void 0};var V={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){T.templateCache=e},get templateCache(){return T.templateCache}},T=new D;V.clearCache=function(){return T.clearCache()},V.parse=function(e,n){return T.parse(e,n)},V.render=function(e,n,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((y(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)'));var o;return T.render(e,n,t,i)},V.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return L[e]}))},V.Scanner=M,V.Context=I,V.Writer=D;var P=function(t){o(s,t);var r=c(s);function s(e){var t,i=e.root,o=e.style,a=e.template,l=e.templateData;return n(this,s),(t=r.call(this)).__root=i,t.attachShadow({mode:"open"}),t.__element=t.__addTemplate(a,l),t.__addStyle(o),t.__bindHandlers(),t.$el=t.__getRootElement(),t.$refs=t.__getReferences(),t}return i(s,[{key:"connectedCallback",value:function(){this.__setupEventListeners(),this.__triggerResize(),this.__triggerConnected()}},{key:"destroy",value:function(){this.__removeEventListeners(),this.__triggerDestroyed()}},{key:"$root",get:function(){return this.__root}},{key:"element",get:function(){return this.__element}},{key:"__bindHandlers",value:function(){this.__resizeHandler=this.__resizeHandler.bind(this)}},{key:"__setupEventListeners",value:function(){window.addEventListener("resize",this.__resizeHandler)}},{key:"__removeEventListeners",value:function(){window.removeEventListener("resize",this.__resizeHandler)}},{key:"__addTemplate",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===e(n)&&(n=this.$root.isLayoutSidebar()?n.templateSidebar:n.templateDevtools);var i=V.render(n,t);return this.shadowRoot.innerHTML=i,this.shadowRoot.firstChild}},{key:"__addStyle",value:function(n){"object"===e(n)&&(n=this.$root.isLayoutSidebar()?n.styleSidebar:n.styleDevtools);var t=document.createElement("style"),i=document.createTextNode(n);t.appendChild(i),this.shadowRoot.appendChild(t)}},{key:"__getRootElement",value:function(){return this.shadowRoot.firstChild}},{key:"__getReferences",value:function(){for(var e,n={},t=this.shadowRoot.querySelectorAll("[ref]"),i=0,o=t.length;i<o;i++)n[(e=t[i]).getAttribute("ref")]=e;return n}},{key:"__triggerConnected",value:function(){"function"==typeof this.connected&&this.connected()}},{key:"__triggerDestroyed",value:function(){"function"==typeof this.destroyed&&this.destroyed()}},{key:"__triggerResize",value:function(){"function"==typeof this.onResize&&this.onResize()}},{key:"__resizeHandler",value:function(){this.__triggerResize()}}]),s}(u(HTMLElement)),A=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.wrapper;return n(this,r),(i=t.call(this,{root:o,style:{styleSidebar:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.dddd {\n    /* Layout */\n    --font: 'Arial', sans-serif;\n    --background-color: rgba(27, 27, 27, 0.9);\n\n    /* Panels */\n    --panel-background-color: rgba(27, 27, 27, 0.9);\n    --panel-spacing: 6px;\n\n    /* Groups */\n    --group-header-padding: 11px;\n    --group-header-font-size: 11px;\n    --group-header-background-color: rgba(255, 255, 255, 0.03);\n    --group-padding: 9px 7px 9px 10px;\n    --group-border-radius: 4px;\n\n    /* Components */\n    --component-row-gap: 4px;\n\n    /* Label */\n    --label-width: 40%;\n    --label-padding: 0 20px 0 0;\n    --label-color: rgba(255, 255, 255, 0.5);\n    --label-font-size: 11px;\n    --label-font-weight: 400;\n\n    /* Input */\n    --input-background-color: rgba(255, 255, 255, 0.03);\n    --input-background-color-hover: rgba(255, 255, 255, 0.08);\n    --input-background-color-error: rgba(255, 0, 0, 0.13);\n    --input-background-color-transition: background-color 0.35s ease-out;\n    --input-highlight-color: rgba(220, 159, 47, 0.53);\n    --input-highlight-color-hover: rgba(220, 159, 47, 0.75);\n    --input-text-color: rgba(255, 255, 255, 0.75);\n    --input-font-size: 11px;\n    --input-font-weight: 300;\n    --input-border-radius: 4px;\n    --input-padding: 10px;\n    --input-height: 26px;\n\n    z-index: 1337;\n\n    width: 300px;\n    height: 100%;\n    max-height: 100vh;\n\n    background: var(--background-color);\n}\n\n.content {\n    width: 100%;\n    height: 100%;\n    /* overflow: auto; */\n}\n\n.resize-handle {\n    position: absolute;\n\n    padding: 0;\n\n    background-color: transparent;\n\n    border: 0;\n    outline: 0;\n}\n\n.resize-handle.side {\n    top: 0;\n    left: 0;\n\n    width: 6px;\n    height: 100%;\n\n    cursor: ew-resize;\n}\n\n.resize-handle.bottom {\n    bottom: 0;\n    left: 0;\n\n    width: 100%;\n    height: 6px;\n\n    cursor: ns-resize;\n}\n\n.resize-handle.corner {\n    bottom: 0;\n    left: 0;\n\n    width: 10px;\n    height: 10px;\n\n    cursor: nesw-resize;\n}\n",styleDevtools:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.dddd {\n    /* Layout */\n    --font: 'Arial', sans-serif;\n    --background-color: #161616;\n\n    /* Panels */\n    --panel-background-color: #1B1B1B;\n    --panel-spacing: 15px;\n\n    /* Groups */\n    --group-header-font-size: 15px;\n    --group-header-background-color: rgba(255, 255, 255, 0.03);\n    --group-padding: 30px;\n    --group-border-radius: 10px;\n\n    /* Components */\n    --component-row-gap: 7px;\n\n    /* Label */\n    --label-width: 30%;\n    --label-padding: 0 20px 0 0;\n    --label-color: rgba(255, 255, 255, 0.75);\n    --label-font-size: 14px;\n    --label-font-weight: 400;\n    \n    /* Input */\n    --input-background-color: rgba(255, 255, 255, 0.03);\n    --input-background-color-hover: rgba(255, 255, 255, 0.08);\n    --input-background-color-transition: background-color 0.35s ease-out;\n    --input-highlight-color: rgba(77, 83, 217, 0.64);\n    --input-highlight-color-hover: rgba(77, 83, 217, 1);\n    --input-text-color: rgba(255, 255, 255, 0.75);\n    --input-font-size: 14px;\n    --input-font-weight: 300;\n    --input-border-radius: 10px;\n    --input-padding: 16px;\n    --input-height: 40px;\n\n    background: var(--background-color);\n}\n"},template:{templateSidebar:'<div class="dddd">\n\n    \x3c!-- Content --\x3e\n    <div class="content" ref="content"></div>\n\n    \x3c!-- Resize handle --\x3e\n    <button class="resize-handle side" ref="resizeHandleSide"></button>\n    <button class="resize-handle bottom" ref="resizeHandleBottom"></button>\n    <button class="resize-handle corner" ref="resizeHandleCorner"></button>\n\n</div>\n',templateDevtools:'<div class="dddd">\n\n    \x3c!-- Content --\x3e\n    <div class="content" ref="content"></div>\n\n</div>\n'}}))._isMouseDown=!1,i._width=0,i._height=0,i._customWidth=0,i._customHeight=0,i._axis={x:0,y:0},i._bindHandlers(),i._setupEventListeners(),s||i._setDefaultPosition(),i}return i(r,[{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"show",value:function(){this.$el.style.width="".concat(this._customWidth,"px"),this._height?this.$el.style.height="".concat(this._height,"px"):this.$el.style.height="100%"}},{key:"hide",value:function(){this._customWidth=this.$el.offsetWidth,this.$el.style.width="auto",this.$el.style.height="auto"}},{key:"addElement",value:function(e){this.$refs.content.appendChild(e)}},{key:"_bindHandlers",value:function(){this._resizeHandleSideMouseDownHandler=this._resizeHandleSideMouseDownHandler.bind(this),this._resizeHandleBottomMouseDownHandler=this._resizeHandleBottomMouseDownHandler.bind(this),this._resizeHandleCornerMouseDownHandler=this._resizeHandleCornerMouseDownHandler.bind(this),this._windowMouseUpHandler=this._windowMouseUpHandler.bind(this),this._windowMouseMoveHandler=this._windowMouseMoveHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$root.isDevtools||(this.$refs.resizeHandleSide.addEventListener("mousedown",this._resizeHandleSideMouseDownHandler),this.$refs.resizeHandleBottom.addEventListener("mousedown",this._resizeHandleBottomMouseDownHandler),this.$refs.resizeHandleCorner.addEventListener("mousedown",this._resizeHandleCornerMouseDownHandler),window.addEventListener("mouseup",this._windowMouseUpHandler),window.addEventListener("mousemove",this._windowMouseMoveHandler))}},{key:"_removeEventListeners",value:function(){this.$root.isDevtools||(this.$refs.resizeHandleCorner.removeEventListener("mousedown",this._resizeHandleCornerMouseDownHandler),window.removeEventListener("mouseup",this._windowMouseUpHandler),window.removeEventListener("mousemove",this._windowMouseMoveHandler))}},{key:"_setDefaultPosition",value:function(){this.$el.style.position="fixed",this.$el.style.top=0,this.$el.style.right=0}},{key:"onResize",value:function(){var e;this._width=this._customWidth?this._customWidth:this.$el.offsetWidth,this._height=this._customHeight?this._customHeight:window.innerHeight,null===(e=this.$root.layout)||void 0===e||e.resize()}},{key:"_setDimensions",value:function(e,n){this._axis.x&&(this._customWidth=window.innerWidth-e,this.$el.style.width="".concat(this._customWidth,"px")),this._axis.y&&(this._customHeight=n,this.$el.style.height="".concat(this._customHeight,"px")),this.onResize()}},{key:"_resizeHandleSideMouseDownHandler",value:function(){this._isMouseDown=!0,this._axis.x=1,this._axis.y=0}},{key:"_resizeHandleBottomMouseDownHandler",value:function(){this._isMouseDown=!0,this._axis.x=0,this._axis.y=1}},{key:"_resizeHandleCornerMouseDownHandler",value:function(){this._isMouseDown=!0,this._axis.x=1,this._axis.y=1}},{key:"_windowMouseUpHandler",value:function(){this._isMouseDown=!1}},{key:"_windowMouseMoveHandler",value:function(e){this._isMouseDown&&this._setDimensions(e.clientX,e.clientY)}}]),r}(P);window.customElements.define("dddd-container",A);var j=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.options;return n(this,r),(i=t.call(this,{root:o,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.header {\n    background-color: var(--panel-background-color);\n\n    box-shadow: 0px 0px 30px 2px rgba(0, 0, 0, 0.05);\n}\n",template:'<div class="header">\n\n</div>\n'}))._options=s,i._width=null,i._height=null,i}return i(r,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"addElement",value:function(e){this.$el.appendChild(e),this._resize()}},{key:"resize",value:function(){this._resize()}},{key:"_resize",value:function(){this._width=this.$el.offsetWidth,this._height=this.$el.offsetHeight}}]),r}(P);window.customElements.define("dddd-header",j);var O="navigation-button",B="active",U=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root;return n(this,r),(i=t.call(this,{root:o,style:{styleSidebar:".navigation {\n    display: none;\n\n    grid-template-columns: 1fr var(--input-height);\n    column-gap: var(--panel-spacing);\n\n    padding: var(--panel-spacing);\n}\n\n.select-container {\n    position: relative;\n\n    height: var(--input-height);\n    overflow: hidden;\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    user-select: none;\n\n    transition: var(--input-background-color-transition);\n}\n\n.select-container:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.select {\n    width: 100%;\n    height: 100%;\n\n    border: 0;\n    outline: 0;\n\n    padding: 0 var(--input-padding);\n\n    background: transparent;\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    appearance: none;\n}\n\n.select optgroup,\n.select option {\n    color: black;\n}\n\n.arrow {\n    position: absolute;\n    top: 0;\n    right: var(--input-padding);\n    bottom: 0;\n\n    margin: auto 0;\n}\n\n.button-toggle {\n    position: relative;\n\n    width: var(--input-height);\n    height: var(--input-height);\n\n    background-color: var(--input-background-color);\n\n    border: 0;\n    border-radius: var(--input-border-radius);\n    outline: 0;\n\n    cursor: pointer;\n\n    transition: var(--input-background-color-transition);\n}\n\n.button-toggle:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.button-toggle__line {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n\n    width: 12px;\n    height: 2px;\n\n    margin: auto;\n\n    background: var(--input-text-color);\n}\n",styleDevtools:".navigation {\n    display: none;\n    \n    padding: var(--panel-spacing);\n\n    font-size: 0;\n\n    list-style: none;\n\n    background-color: var(--panel-background-color);\n\n    box-shadow: 0px 0px 30px 2px rgba(0, 0, 0, 0.05);\n}\n\n.navigation li {\n    display: inline-block;\n\n    margin-right: 10px;\n}\n\n.navigation-button {\n    padding: 13px 30px;\n\n    color: rgba(255, 255, 255, 0.5);\n\n    background-color: transparent;\n\n    border: 0;\n    border-radius: 12px;\n    outline: 0;\n\n    font-family: var(--font);\n    font-size: 13px;\n    font-weight: 600;\n\n    cursor: pointer;\n\n    transition: all 0.3s ease-out;\n}\n\n.navigation-button:hover {\n    background-color: rgba(255, 255, 255, 0.01);\n}\n\n.navigation-button.active {\n    color: rgba(255, 255, 255, 0.9);\n\n    background-color: rgba(255, 255, 255, 0.03);\n}"},template:{templateSidebar:'<div class="navigation">\n\n    \x3c!-- Select container--\x3e\n    <div class="select-container" ref="selectContainer">\n\n        \x3c!-- Arrow --\x3e\n        <svg width="11" height="6" viewBox="0 0 11 6" class="arrow">\n            <path d="M1 1L4.83564 4.40945C5.21452 4.74624 5.78548 4.74624 6.16436 4.40945L10 1" stroke="white" fill="transparent" stroke-opacity="0.74" stroke-linecap="round"/>\n        </svg>\n\n        \x3c!-- Select --\x3e\n        <select class="select" ref="select"></select>\n\n    </div>\n\n    \x3c!-- Button toggle --\x3e\n    <button class="button-toggle" ref="buttonToggle">\n        <div class="button-toggle__line"></div>\n    </button>\n\n</div>\n',templateDevtools:'<ul class="navigation"></ul>\n'}}))._isMinimized=!1,i._activeIndex=0,i._groups=[],i._elements=[],i._bindHandlers(),i._setupEventListeners(),i}return i(r,[{key:"destroy",value:function(){this._removeEventListeners()}},{key:"add",value:function(e,n){if(0===this._elements.length&&this._setVisible(),this.$root.isLayoutSidebar()){var t=document.createElement("option");if(t.innerText=e,t.value=this._elements.length,this._elements.push(t),n){var i=this._getGroupElement(n);i||(i=this._createGroupElement(n)),i.appendChild(t)}else this.$refs.select.appendChild(t)}else{var o=document.createElement("button");o.classList.add(O),this.$el.children.length===this._activeIndex&&o.classList.add(B),o.innerText=e;var r=document.createElement("li");r.appendChild(o),this._elements.push(r),this.$el.appendChild(r)}}},{key:"remove",value:function(e){for(var n,t,i=0,o=this._elements.length;i<o;i++)(t=this._elements[i]).innerText===e&&(n=t);n&&n.remove(),this._elements.splice(this._elements.indexOf(n),1)}},{key:"goto",value:function(e){this.$refs.select.value=e}},{key:"show",value:function(){this._isMinimized=!1,this.$refs.selectContainer.style.display="block",this.$el.style.display="grid"}},{key:"hide",value:function(){this._isMinimized=!0,this.$refs.selectContainer.style.display="none",this.$el.style.display="block"}},{key:"_bindHandlers",value:function(){this._clickHandler=this._clickHandler.bind(this),this._selectChangeHandler=this._selectChangeHandler.bind(this),this._clickButtonToggle=this._clickButtonToggle.bind(this)}},{key:"_setupEventListeners",value:function(){this.$el.addEventListener("click",this._clickHandler),this.$refs.select&&this.$refs.select.addEventListener("change",this._selectChangeHandler),this.$refs.buttonToggle&&this.$refs.buttonToggle.addEventListener("click",this._clickButtonToggle)}},{key:"_removeEventListeners",value:function(){this.$el.removeEventListener("click",this._clickHandler),this.$refs.select&&this.$refs.select.removeEventListener("change",this._selectChangeHandler),this.$refs.buttonToggle&&this.$refs.buttonToggle.removeEventListener("click",this._clickButtonToggle)}},{key:"_setVisible",value:function(){this.$el.style.display=this._isMinimized?"block":"grid"}},{key:"_getNavigationButtonIndex",value:function(e){return Array.prototype.indexOf.call(this.$el.children,e)}},{key:"_switch",value:function(e){this.$el.children[this._activeIndex].firstChild.classList.remove(B),this._activeIndex=e,this.$el.children[this._activeIndex].firstChild.classList.add(B),this._triggerSwitchEvent(this._activeIndex)}},{key:"_triggerSwitchEvent",value:function(e){this._activeIndex=e;var n=new CustomEvent("switch",{detail:{index:this._activeIndex}});this.dispatchEvent(n)}},{key:"_createGroupElement",value:function(e){var n=document.createElement("optgroup");return n.label=e,this.$refs.select.appendChild(n),this._groups.push({label:e,element:n}),n}},{key:"_getGroupElement",value:function(e){for(var n,t=0,i=this._groups.length;t<i;t++)if((n=this._groups[t]).label===e)return n.element}},{key:"_clickHandler",value:function(e){if(e.target.closest(".".concat(O))){var n=this._getNavigationButtonIndex(e.target.parentElement);this._switch(n)}}},{key:"_selectChangeHandler",value:function(){var e=parseInt(this.$refs.select.value);this._triggerSwitchEvent(e),this.$refs.select.blur()}},{key:"_clickButtonToggle",value:function(){this.$root.layout.toggleVisibility()}}]),r}(P);window.customElements.define("dddd-navigation",U);var G=function(e){o(r,e);var t=c(r);function r(e){var i=e.root;return n(this,r),t.call(this,{root:i,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.global {\n    position: relative;\n\n    /* padding: var(--panel-spacing) var(--panel-spacing) 0 var(--panel-spacing); */\n    padding: 0 var(--panel-spacing) 1px;\n\n    -webkit-font-smoothing: antialiased;\n    font-family: var(--font);\n    font-weight: 300;\n    font-size: 13px;\n\n    background-color: var(--panel-background-color);\n}\n",template:'<div class="global" ref="content"></div>\n'})}return i(r,[{key:"content",get:function(){return this.$refs.content}},{key:"height",get:function(){return this._height}},{key:"addGroup",value:function(e){var n=this.$root.addGroup(e,{container:this._label});return this._resize(),n}},{key:"show",value:function(){this.$refs.content.style.display="block"}},{key:"hide",value:function(){this.$refs.content.style.display="none"}},{key:"resize",value:function(){this._resize()}},{key:"_resize",value:function(){this._width=this.$el.offsetWidth,this._height=this.$el.offsetHeight}}]),r}(P);window.customElements.define("dddd-global",G);var R=new(function(){function e(){n(this,e),this._callbacks=[],this._tick=this._tick.bind(this),this._start()}return i(e,[{key:"destroy",value:function(){this._stop()}},{key:"add",value:function(e){this._callbacks.push(e)}},{key:"remove",value:function(e){this._callbacks.splice(this._callbacks.indexOf(e),1)}},{key:"_start",value:function(){this._requestAnimationFrame=window.requestAnimationFrame(this._tick)}},{key:"_stop",value:function(){window.cancelAnimationFrame(this._requestAnimationFrame)}},{key:"_tick",value:function(){window.requestAnimationFrame(this._tick),this._triggerCallbacks()}},{key:"_triggerCallbacks",value:function(){for(var e=0,n=this._callbacks.length;e<n;e++)this._callbacks[e]()}}]),e}()),F=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.options;return n(this,r),(i=t.call(this,{root:o,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.stats {\n    padding: 0 var(--panel-spacing) var(--panel-spacing) var(--panel-spacing);\n}\n\n.content {\n    height: 100px;\n\n    border-radius: var(--input-border-radius);background-color: var(--input-background-color);\n\n    background-color: var(--input-background-color);\n}\n\n.canvas {\n    width: 100%;\n}\n",template:'<div class="stats">\n\n    \x3c!-- Content --\x3e\n    <div class="content">\n\n        \x3c!-- Canvas --\x3e\n        <canvas class="canvas" ref="canvas"></canvas>\n\n    </div>\n\n</div>\n'}))._options=s,i._beginTime=window.performance.now(),i._previousTime=i._beginTime,i._fps=0,i._frames=0,i._context=i._getContext(),i._bindHandlers(),i._setupEventListeners(),i}return i(r,[{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"begin",value:function(){this._beginTime=window.performance.now()}},{key:"end",value:function(){this._update(),this._draw()}},{key:"_bindHandlers",value:function(){this._tickHandler=this._tickHandler.bind(this)}},{key:"_setupEventListeners",value:function(){R.add(this._tickHandler)}},{key:"_removeEventListeners",value:function(){R.remove(this._tickHandler)}},{key:"_getContext",value:function(){return this.$refs.canvas.getContext("2d")}},{key:"_update",value:function(){var e=window.performance.now();this._frames++,e>=this._previousTime+1e3&&(this._fps=1e3*this._frames/(e-this._previousTime),this._previousTime=e,this._frames=0,this._drawFps())}},{key:"_draw",value:function(){}},{key:"_drawFps",value:function(){this._context.translate(1,0),this._context.fillRect(0,50,1,-50*this._fps/60)}},{key:"_tickHandler",value:function(){}}]),r}(P);window.customElements.define("dddd-stats",F);var W="active",N=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.label;return n(this,r),(i=t.call(this,{root:o,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.layer {\n    display: none;\n\n    position: relative;\n\n    width: 100%;\n    overflow: hidden;\n}\n\n.layer.active {\n    display: block;\n}\n",template:'<div class="layer"></div>',templateData:{label:s}}))._label=s,i._containerWidth=0,i._itemWidth=0,i._columnsHeight=[],i._bindHandlers(),i._setupEventListeners(),i}return i(r,[{key:"destroy",value:function(){this._removeEventListeners()}},{key:"label",get:function(){return this._label}},{key:"content",get:function(){return this.element}},{key:"addGroup",value:function(e){return this.$root.addGroup(e,{container:this._label})}},{key:"activate",value:function(){this.$el.classList.add(W)}},{key:"deactivate",value:function(){this.$el.classList.remove(W)}},{key:"resize",value:function(){this._resize()}},{key:"_bindHandlers",value:function(){this._resizeHandler=this._resizeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){window.addEventListener("resize",this._resizeHandler)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("resize",this._resizeHandler)}},{key:"_resize",value:function(){0!==this.$el.children.length&&(this._containerWidth=this.$el.offsetWidth,this._columnCount=this._getColumCount(),this._itemGap=this._getItemGap(),this._itemWidth=this._getItemWidth(),this._resetColumnHeight(),this.$root.isLayoutSidebar()||(this._positionGroups(),this._updateHeight()))}},{key:"_getColumCount",value:function(){return Math.max(Math.floor(this._containerWidth/350),1)}},{key:"_getItemWidth",value:function(){var e=this._itemGap*(this._columnCount-1);return Math.floor((this._containerWidth-e)/this._columnCount)}},{key:"_getItemGap",value:function(){var e=this.$el.children[0].element,n=window.getComputedStyle(e);return parseInt(n.marginRight)}},{key:"_getItemHeight",value:function(e){var n=window.getComputedStyle(e),t=e.offsetHeight;return t+=parseInt(n.marginBottom)}},{key:"_resetColumnHeight",value:function(){this._columnsHeight=[];for(var e=0;e<this._columnCount;e++)this._columnsHeight.push(0)}},{key:"_positionGroups",value:function(){var e,n=_(this.$el.children);try{for(n.s();!(e=n.n()).done;){var t=e.value,i=this._getNexColumnIndex(),o=(i<this._columnCount?this._itemGap:0)*i,r=i*this._itemWidth+o,s=this._columnsHeight[i],a=this._getItemHeight(t.element);this._columnsHeight[i]+=a,t.element.style.position="absolute",t.element.style.transform="translate(".concat(r,"px, ").concat(s,"px)"),t.element.style.width="".concat(this._itemWidth,"px")}}catch(e){n.e(e)}finally{n.f()}}},{key:"_getNexColumnIndex",value:function(){var e=this._columnsHeight.slice(0).sort((function(e,n){return e-n})).shift();return this._columnsHeight.indexOf(e)}},{key:"_updateHeight",value:function(){var e=Math.max.apply(Math,p(this._columnsHeight));this.$el.style.height="".concat(e,"px")}},{key:"_resizeHandler",value:function(){this._resize()}}]),r}(P);window.customElements.define("dddd-layer",N);var K=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root;return n(this,r),(i=t.call(this,{root:o,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.layers {\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n\n    /* padding: var(--panel-spacing) var(--panel-spacing) 0 var(--panel-spacing); */\n    padding: var(--panel-spacing);\n\n    -webkit-font-smoothing: antialiased;\n    font-family: var(--font);\n    font-weight: 300;\n    font-size: 13px;\n}\n",template:'<div class="layers"></div>'}))._activeIndex=0,i._layers=[],i.add("default"),i}return i(r,[{key:"destroyed",value:function(){this._destroyLayers()}},{key:"add",value:function(e){var n=new N({root:this.$root,label:e});return this._layers.length===this._activeIndex&&n.activate(),this._layers.push(n),this.$el.appendChild(n),n}},{key:"remove",value:function(e){for(var n,t,i=0,o=this._layers.length;i<o;i++)(t=this._layers[i]).label===e&&(n=t);n&&(this.$el.removeChild(n),this._layers.splice(this._layers.indexOf(n),1))}},{key:"goto",value:function(e){var n=this._layers[this._activeIndex];n&&n.deactivate(),this._layers[e].activate(),this._activeIndex=e,this._resizeLayers()}},{key:"get",value:function(e){var n,t=_(this._layers);try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.label===e)return i}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"getByIndex",value:function(e){return this._layers[e]}},{key:"getIndexByLabel",value:function(e){for(var n=0,t=this._layers.length;n<t;n++)if(this._layers[n].label===e)return n;return null}},{key:"isEmpty",value:function(){return 0===this._layers.length}},{key:"resize",value:function(){this._resizeLayers()}},{key:"show",value:function(){this.$el.style.display="block"}},{key:"hide",value:function(){this.$el.style.display="none"}},{key:"setHeight",value:function(e){this.$el.style.height="".concat(e,"px")}},{key:"_destroyLayers",value:function(){var e,n=_(this._layers);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(e){n.e(e)}finally{n.f()}}},{key:"_resizeLayers",value:function(){var e,n=_(this._layers);try{for(n.s();!(e=n.n()).done;){e.value.resize()}}catch(e){n.e(e)}finally{n.f()}}}]),r}(P);window.customElements.define("dddd-layers",K);var q=new(function(){function e(){n(this,e)}return i(e,[{key:"set",value:function(e,n){var t=JSON.parse(localStorage.getItem(e))||{};Object.assign(t,n),localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e,n){return(JSON.parse(localStorage.getItem(e))||{})[n]}}]),e}()),X=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.label,a=e.parent,l=e.collapseGroups,u=e.options;return n(this,r),(i=t.call(this,{root:o,style:{styleSidebar:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.group {\n    overflow: hidden;\n\n    margin: 0 0 var(--panel-spacing) 0;\n\n    background-color: var(--panel-background-color);\n\n    border-radius: var(--group-border-radius);\n\n    box-shadow: 0px 0px 30px 2px rgba(0, 0, 0, 0.05);\n}\n\n.button-header {\n    position: relative;\n\n    width: 100%;\n\n    padding: 0;\n\n    text-align: left;\n\n    background-color: var(--group-header-background-color);\n\n    border: 0;\n    outline: 0;\n    cursor: pointer;\n}\n\n.label {\n    display: block;\n\n    padding: var(--group-header-padding);\n\n    font-size: var(--group-header-font-size);\n    font-weight: 400;\n    color: white;\n    letter-spacing: 0.025em;\n}\n\n.arrow {\n    position: absolute;\n    top: 0;\n    right: calc(var(--group-header-padding) + 1px);\n    bottom: 0;\n\n    margin: auto 0;\n}\n\n.content {\n    display: grid;\n    position: relative;\n\n    row-gap: var(--component-row-gap);\n\n    padding: var(--group-padding);\n}\n\n.hidden .content {\n    display: none;\n}\n\n/* Subgroup */\n.group.subgroup {\n    padding: 8px 0 0 0;\n\n    background-color: transparent;\n\n    border-radius: 0;\n\n    box-shadow: initial;\n}\n\n.subgroup .button-header {\n    margin-bottom: 0;\n\n    background: transparent;\n}\n\n.subgroup .label {\n    padding: 0 0 0 21px;\n\n    font-size: 11px;\n}\n\n.subgroup .arrow {\n    position: absolute;\n    top: 3px;\n    right: 0;\n    bottom: 0;\n    left: 2px;\n\n    width: 10px;\n\n    margin: 0;\n}\n\n.hidden.subgroup .arrow {\n    transform: rotate(-90deg);\n}\n\n.subgroup .content {\n    margin: 7px 0 4px 0;\n    padding: 0 0 0 20px;\n}\n\n.subgroup .content:before {\n    content: '';\n\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 6px;\n\n    width: 1px;\n    height: 100%;\n\n    background: rgba(255, 255, 255, 0.1);\n}\n",styleDevtools:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.group {\n    padding: calc(var(--group-padding) - 3px) var(--group-padding) var(--group-padding);\n    margin: 0 var(--panel-spacing) var(--panel-spacing) 0;\n\n    background-color: var(--panel-background-color);\n    \n    border-radius: var(--group-border-radius);\n\n    box-shadow: 0px 0px 30px 2px rgba(0, 0, 0, 0.05);\n}\n\n.label {\n    display: block;\n\n    margin-bottom: 20px;\n\n    font-size: var(--group-header-font-size);\n    font-weight: 600;\n    color: white;\n    letter-spacing: 0.025em;\n}\n\n.content {\n    display: grid;\n\n    row-gap: var(--component-row-gap);\n}"},template:{templateSidebar:'<div class="group active">\n\n    \x3c!-- Button header --\x3e\n    <button class="button-header" ref="buttonHeader">\n\n        \x3c!-- Label --\x3e\n        <span class="label">\n            {{ label }}\n        </span>\n\n        \x3c!-- Arrow --\x3e\n        <svg width="11" height="6" viewBox="0 0 11 6" class="arrow">\n            <path d="M1 1L4.83564 4.40945C5.21452 4.74624 5.78548 4.74624 6.16436 4.40945L10 1" stroke="white" fill="transparent" stroke-opacity="0.74" stroke-linecap="round"/>\n        </svg>\n\n    </button>\n\n    \x3c!-- Content --\x3e\n    <div class="content" ref="content"></div>\n\n</div>\n',templateDevtools:'<div class="group">\n\n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Content --\x3e\n    <div class="content" ref="content"></div>\n\n</div>\n'},templateData:{label:s}}))._label=s,i._options=u,i._parent=a||null,i._collapseGroups=l,i._id=i._generateId(),i._isVisible=!0,i._isComponentsCreated=!1,i._bindHandlers(),i._setupEventListeners(),i._addSubgroupClass(),i._updateStartupVisibility(),i}return i(r,[{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"id",get:function(){return this._id}},{key:"label",get:function(){return this._label}},{key:"content",get:function(){return this.$refs.content}},{key:"parent",get:function(){return this._parent}},{key:"options",get:function(){return this._options}},{key:"add",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.parent=this,this.$root.add(e,n,t)}},{key:"addButton",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.parent=this,this.$root.addButton(e,n)}},{key:"addCanvas",value:function(e){return e.parent=this,this.$root.addCanvas(e)}},{key:"addGroup",value:function(e){return this.$root.addGroup(e,{parent:this})}},{key:"remove",value:function(){return this.$root.removeGroup(this._id)}},{key:"_bindHandlers",value:function(){this._clickHandler=this._clickHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.buttonHeader&&this.$refs.buttonHeader.addEventListener("click",this._clickHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.buttonHeader&&this.$refs.buttonHeader.removeEventListener("click",this._clickHandler)}},{key:"_generateId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}},{key:"_addSubgroupClass",value:function(){"DDDD-LAYER"!==this._parent.tagName&&"DDDD-GLOBAL"!==this._parent.tagName&&this.$el.classList.add("subgroup")}},{key:"_updateStartupVisibility",value:function(){var e=this._getLocalStorageKey(),n=q.get(e,"visibility");n?"visible"===n?this._show():this._hide():this._collapseGroups?this._hide():this._show()}},{key:"_toggleVisibility",value:function(){this._isVisible?this._hide():this._show()}},{key:"_show",value:function(){var e=this;this._isComponentsCreated||setTimeout((function(){e.$root.layout.components.createElementsByGroupId(e._id),e._isComponentsCreated=!0}),0),this._isVisible=!0,this._updateLocalStorage("visible"),this.$el.classList.remove("hidden"),this.$root.layout.resize()}},{key:"_hide",value:function(){this._isVisible=!1,this._updateLocalStorage("hidden"),this.$el.classList.add("hidden"),this.$root.layout.resize()}},{key:"_updateLocalStorage",value:function(e){var n=this._getLocalStorageKey();q.set(n,{visibility:e})}},{key:"_getLocalStorageKey",value:function(){return"group.".concat(this._options.container,".").concat(this._label)}},{key:"_clickHandler",value:function(){this._toggleVisibility()}}]),r}(P);window.customElements.define("dddd-group",X);var Y=function(){function e(){n(this,e),this._layers=[],this._groups=[],this._components=[]}return i(e,[{key:"addLayer",value:function(e){this._layers.push(e)}},{key:"removeLayer",value:function(e){this._layers.splice(this._layers.indexOf(e),1)}},{key:"addGroup",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._groups.push({id:e,label:n,options:t})}},{key:"removeGroup",value:function(e){var n=this._getGroupIndex(e);this._groups.splice(n,1)}},{key:"addComponent",value:function(e){this._components.push(e)}},{key:"get",value:function(){return{layers:this._layers,groups:this._groups,components:this._getComponents()}}},{key:"getModelsByGroupId",value:function(e){for(var n,t=[],i=0,o=this._components.length;i<o;i++)(n=this._components[i]).parentId===e&&t.push(n);return t}},{key:"_getComponents",value:function(){var e,n=[],t=_(this._components);try{for(t.s();!(e=t.n()).done;){var i=e.value;n.push(i.getData())}}catch(e){t.e(e)}finally{t.f()}return n}},{key:"_getGroupIndex",value:function(e){var n,t=_(this._groups.entries());try{for(t.s();!(n=t.n()).done;){var i=h(n.value,2),o=i[0];if(i[1].id===e)return o}}catch(e){t.e(e)}finally{t.f()}return null}}]),e}(),J=new Y,Z=function(e){o(r,e);var t=c(r);function r(e){var i,o=e.root,s=e.model,a=e.style,l=e.template;return n(this,r),(i=t.call(this)).__root=o,i.__model=s,i.attachShadow({mode:"open"}),i.$el=i.__addTemplate(l),i.$refs=i.__getReferences(i.$el),i.__addStyle(a),i.__addLockedClass(),i.__bindHandlers(),i}return i(r,[{key:"connectedCallback",value:function(){this.__setupEventListeners(),this.__triggerResize(),this.__triggerConnected()}},{key:"destroy",value:function(){this.__removeEventListeners(),this.__triggerDestroyed()}},{key:"$root",get:function(){return this.__root}},{key:"model",get:function(){return this.__model}},{key:"container",get:function(){return this.__model.options.container}},{key:"tick",value:function(){this.__triggerTick(),this.model.options.listen&&(this.model.updateValueFromObject(),this.__triggerOnListen())}},{key:"resize",value:function(){this.__triggerResize()}},{key:"__bindHandlers",value:function(){this.__resizeHandler=this.__resizeHandler.bind(this)}},{key:"__setupEventListeners",value:function(){window.addEventListener("resize",this.__resizeHandler)}},{key:"__removeEventListeners",value:function(){window.removeEventListener("resize",this.__resizeHandler)}},{key:"__addTemplate",value:function(e){var n={label:this.__getLabel()},t=V.render(e,n);return this.shadowRoot.innerHTML=t,this.shadowRoot.firstChild}},{key:"__addStyle",value:function(e){var n=document.createElement("style"),t=document.createTextNode(e);n.appendChild(t),this.shadowRoot.appendChild(n)}},{key:"__getLabel",value:function(){var e=this.__model.options.label?this.__model.options.label:this.__parsePropertyToLabel(this.__model.property);return this.__model.options.persistent&&(e+="*"),e}},{key:"__parsePropertyToLabel",value:function(e){return"_"!==e.charAt(0)&&"u"!==e.charAt(0)||(e=(e=e.substr(1)).replace(/([A-Z])/g," $1").toLowerCase()),e}},{key:"__getReferences",value:function(e){for(var n,t={},i=e.querySelectorAll("[ref]"),o=0,r=i.length;o<r;o++)t[(n=i[o]).getAttribute("ref")]=n;return t}},{key:"__addLockedClass",value:function(){this.model.options.locked&&this.$el.classList.add("locked")}},{key:"__triggerConnected",value:function(){"function"==typeof this.connected&&this.connected()}},{key:"__triggerDestroyed",value:function(){"function"==typeof this.destroyed&&this.destroyed()}},{key:"__triggerResize",value:function(){"function"==typeof this.onResize&&this.onResize()}},{key:"__triggerTick",value:function(){"function"==typeof this.onTick&&this.onTick()}},{key:"__triggerOnListen",value:function(){"function"==typeof this.onListen&&this.onListen()}},{key:"__resizeHandler",value:function(){this.__triggerResize()}}]),r}(u(HTMLElement)),Q=new(function(){function e(){n(this,e),this._value=null}return i(e,[{key:"set",value:function(e){this._value=e}},{key:"get",value:function(){return this._value}},{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this._value).then()}}]),e}()),ee="active",ne=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: center;\n}\n\n.label {\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    position: relative;\n\n    height: var(--input-height);\n    overflow: hidden;\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    user-select: none;\n\n    transition: var(--input-background-color-transition);\n\n    cursor: col-resize;\n}\n\n.input-container:hover,\n.input-container.active {\n    background-color: var(--input-background-color-hover);\n}\n\n.locked .input-container {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n\n.scrubber {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    background: var(--input-highlight-color);\n\n    transform-origin: top left;\n}\n\n.input {\n    position: relative;\n    display: block;\n\n    width: 100%;\n    height: 100%;\n\n    padding: 0 var(--input-padding);\n\n    background-color: transparent;\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    line-height: var(--input-height);\n    color: var(--input-text-color);\n\n    outline: none;\n    border: 0;\n\n    pointer-events: none;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container --\x3e\n    <div class="input-container" ref="inputContainer">\n\n        \x3c!-- Scrubber --\x3e\n        <div class="scrubber" ref="scrubber"></div>\n        \n        \x3c!-- Input --\x3e\n        <input class="input" ref="input">\n\n    </div>\n\n</div>',model:i}))._stepSize=o.model.options.stepSize||.01,o._decimalPlaces=o._getDecimalPlaces(o._stepSize),o._isPointerLockActive=!1,o._scrubberOffset=0,o._inputContainer={x:0,width:0},o._scrubber={width:0},o._mouseStartPosition={x:0,y:0},o._mousePosition={x:0,y:0},o._isMouseDown=!1,o._isShiftDown=!1,o._isSlideStarted=!1,o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._resize(),this._updateValue(this.model.value),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onResize",value:function(){this._resize()}},{key:"onTick",value:function(){this._scaleScrubber(this.model.value)}},{key:"onListen",value:function(){this._updateInputValue(this.model.value),this._scaleScrubber(this.model.value)}},{key:"_bindHandlers",value:function(){this._inputContainerMouseEnterHandler=this._inputContainerMouseEnterHandler.bind(this),this._inputContainerMouseDownHandler=this._inputContainerMouseDownHandler.bind(this),this._inputContainerMouseUpHandler=this._inputContainerMouseUpHandler.bind(this),this._inputChangeHandler=this._inputChangeHandler.bind(this),this._inputBlurHandler=this._inputBlurHandler.bind(this),this._pointerLockHanderHandler=this._pointerLockHanderHandler.bind(this),this._windowMouseMoveHandler=this._windowMouseMoveHandler.bind(this),this._windowMouseUpHandler=this._windowMouseUpHandler.bind(this),this._windowKeyDownHandler=this._windowKeyDownHandler.bind(this),this._windowKeyUpHandler=this._windowKeyUpHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.inputContainer.addEventListener("mouseenter",this._inputContainerMouseEnterHandler),this.$refs.inputContainer.addEventListener("mousedown",this._inputContainerMouseDownHandler),this.$refs.inputContainer.addEventListener("mouseup",this._inputContainerMouseUpHandler),this.$refs.input.addEventListener("change",this._inputChangeHandler),this.$refs.input.addEventListener("blur",this._inputBlurHandler),document.addEventListener("pointerlockchange",this._pointerLockHanderHandler),window.addEventListener("mousemove",this._windowMouseMoveHandler),window.addEventListener("mouseup",this._windowMouseUpHandler),window.addEventListener("keydown",this._windowKeyDownHandler),window.addEventListener("keyup",this._windowKeyUpHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.inputContainer.removeEventListener("mouseenter",this._inputContainerMouseEnterHandler),this.$refs.inputContainer.removeEventListener("mousedown",this._inputContainerMouseDownHandler),this.$refs.inputContainer.removeEventListener("mouseup",this._inputContainerMouseUpHandler),this.$refs.input.removeEventListener("change",this._inputChangeHandler),this.$refs.input.removeEventListener("blur",this._inputBlurHandler),document.removeEventListener("pointerlockchange",this._pointerLockHanderHandler),window.removeEventListener("mousemove",this._windowMouseMoveHandler),window.removeEventListener("mouseup",this._windowMouseUpHandler),window.removeEventListener("keydown",this._windowKeyDownHandler),window.removeEventListener("keyup",this._windowKeyUpHandler)}},{key:"_updateValue",value:function(e){this.model.value=Math.max(Math.min(e,this.model.options.max),this.model.options.min),this._updateInputValue(this.model.value),Q.set(this.model.value)}},{key:"_calcStartValue",value:function(e){var n=this._isShiftDown?.3:1,t=(e-this._mouseStartPosition.x)*n,i=(this._mouseStartPosition.x-this._inputContainer.x+t)/this._inputContainer.width;return this._map(i,0,1,this.model.options.min,this.model.options.max)}},{key:"_scaleScrubber",value:function(e){var n=this._map(e,this.model.options.min,this.model.options.max,0,1);this.$refs.scrubber.style.transform="scaleX(".concat(n,")")}},{key:"_showScrubber",value:function(){this.$refs.scrubber.style.display="block"}},{key:"_hideScrubber",value:function(){this.$refs.scrubber.style.display="none"}},{key:"_updateInputValue",value:function(e){var n=e.toFixed(this._decimalPlaces);this.$refs.input.value=n}},{key:"_map",value:function(e,n,t,i,o){return(e-n)*(o-i)/(t-n)+i}},{key:"_getDecimalPlaces",value:function(e){var n=e.toString().split(".");return n.length>1?n[1].length:0}},{key:"_resize",value:function(){this._inputContainer=this._getContainerData(),this._scaleScrubber(this.model.value)}},{key:"_getContainerData",value:function(){var e=this.$refs.inputContainer.getBoundingClientRect();return{x:e.left,width:e.width}}},{key:"_selectInput",value:function(){this._isInputSelected=!0,this.$refs.input.select()}},{key:"_deselectInput",value:function(){this._isInputSelected=!1,this.$refs.input.blur()}},{key:"_addActiveClass",value:function(){this.$refs.inputContainer.classList.add(ee)}},{key:"_removeActiveClass",value:function(){this.$refs.inputContainer.classList.remove(ee)}},{key:"_getInputValueBasedOnMouseMovement",value:function(e){var n=this._isShiftDown?.3:1;return this.model.value+e*this._stepSize*n}},{key:"_pointerLockHanderHandler",value:function(){this.shadowRoot.pointerLockElement===this.$refs.input?this._isPointerLockActive=!0:this._isPointerLockActive=!1}},{key:"_windowMouseMoveHandler",value:function(e){if(this._isMouseDown){var n=e.movementX;if(Math.abs(n)>100&&(n=1*Math.sign(n)),n%2==0&&(n*=.5),!this._isSlideStarted){var t=this._calcStartValue(e.clientX);this._updateValue(t)}Math.abs(n)>0&&(this._isSlideStarted=!0);var i=this._getInputValueBasedOnMouseMovement(n);this._updateValue(i)}}},{key:"_windowMouseUpHandler",value:function(e){this._isMouseDown=!1,this._isSlideStarted=!1,this._removeActiveClass()}},{key:"_inputContainerMouseUpHandler",value:function(){document.exitPointerLock(),this._isSlideStarted||(this._selectInput(),this._hideScrubber())}},{key:"_inputContainerMouseEnterHandler",value:function(){Q.set(this.model.value)}},{key:"_inputContainerMouseDownHandler",value:function(e){this._isMouseDown||this._isInputSelected||(this.$refs.input.requestPointerLock(),this._addActiveClass(),this._mouseStartPosition.x=e.clientX,this._isMouseDown=!0)}},{key:"_inputChangeHandler",value:function(e){var n=parseFloat(this.$refs.input.value);this._updateValue(n),this._deselectInput(),this._showScrubber()}},{key:"_inputBlurHandler",value:function(){this._isInputSelected=!1,this._showScrubber()}},{key:"_windowKeyDownHandler",value:function(e){if(16===e.keyCode)this._isShiftDown||(this._isShiftDown=!0,this._mouseStartPosition.x=this._mousePosition.x)}},{key:"_windowKeyUpHandler",value:function(){this._isShiftDown=!1}}]),r}(Z);window.customElements.define("dddd-slider",ne);var te=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: center;\n\n    transition: background-color 0.15s;\n}\n\n.label {\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input {\n    height: var(--input-height);\n\n    padding: 0 var(--input-padding);\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    background-color: var(--input-background-color);\n\n    border: 0;\n    border-radius: var(--input-border-radius);\n    outline: none;\n\n    transition: var(--input-background-color-transition);\n}\n\n.input:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.locked .input {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input --\x3e\n    <input class="input" ref="input">\n\n</div>',model:i}))._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._updateInputValue(this.model.value),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){this._updateInputValue(this.model.value)}},{key:"_bindHandlers",value:function(){this._keyUpHandler=this._keyUpHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.input.addEventListener("keyup",this._keyUpHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.input.removeEventListener("keyup",this._keyUpHandler)}},{key:"_updateInputValue",value:function(e){this.$refs.input.value=e}},{key:"_keyUpHandler",value:function(){this.model.value=this.$refs.input.value}}]),r}(Z);window.customElements.define("dddd-input",te);var ie=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: start;\n\n    transition: background-color 0.15s;\n}\n\n.label {\n    height: var(--input-height);\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    line-height: var(--input-height);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input {\n    width: 100%;\n    height: var(--input-height);\n\n    padding: 0 var(--input-padding);\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    background-color: var(--input-background-color);\n\n    border: 0;\n    border-radius: var(--input-border-radius);\n    outline: none;\n\n    transition: var(--input-background-color-transition);\n\n    cursor: ew-resize;\n}\n\n.input:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.locked .input {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n",template:'<div class="component">\n\n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input --\x3e\n    <input class="input" ref="input">\n\n</div>\n',model:i}))._stepSize=o.model.options.stepSize||.01,o._min="number"==typeof o.model.options.min?o.model.options.min:null,o._max="number"==typeof o.model.options.max?o.model.options.max:null,o._decimalPlaces=o._getDecimalPlaces(o._stepSize),o._activeInput=null,o._isPointerLockActive=!1,o._isMouseMoved=!1,o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._updateInputValue(this.model.value),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){this._updateInputValue(this.model.value)}},{key:"_bindHandlers",value:function(){this._mouseEnterHandler=this._mouseEnterHandler.bind(this),this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._changeHandler=this._changeHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._pointerLockHanderHandler=this._pointerLockHanderHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.input.addEventListener("mouseenter",this._mouseEnterHandler),this.$refs.input.addEventListener("mousedown",this._mouseDownHandler),this.$refs.input.addEventListener("mouseup",this._mouseUpHandler),this.$refs.input.addEventListener("change",this._changeHandler),this.$refs.input.addEventListener("mousewheel",this._mouseWheelHandler),document.addEventListener("pointerlockchange",this._pointerLockHanderHandler),document.addEventListener("mousemove",this._mouseMoveHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.input.removeEventListener("mouseenter",this._mouseEnterHandler),this.$refs.input.removeEventListener("mousedown",this._mouseDownHandler),this.$refs.input.removeEventListener("mouseup",this._mouseUpHandler),this.$refs.input.removeEventListener("change",this._changeHandler),this.$refs.input.removeEventListener("mousewheel",this._mouseWheelHandler),document.removeEventListener("pointerlockchange",this._pointerLockHanderHandler),document.removeEventListener("mousemove",this._mouseMoveHandler)}},{key:"_updateModelValue",value:function(e){this.model.value=e}},{key:"_getInputValueBasedOnMouseMovement",value:function(e){return this.model.value+e*this._stepSize}},{key:"_updateInputValue",value:function(e){this.$refs.input.value=e.toFixed(this._decimalPlaces)}},{key:"_getDecimalPlaces",value:function(e){var n=e.toString().split(".");return n.length>1?n[1].length:0}},{key:"_mouseEnterHandler",value:function(){Q.set(this.model.value)}},{key:"_mouseDownHandler",value:function(e){this.$refs.input.requestPointerLock(),this._isMouseMoved=!1}},{key:"_mouseUpHandler",value:function(e){document.exitPointerLock(),this._isMouseMoved?this.$refs.input.blur():this.$refs.input.select()}},{key:"_changeHandler",value:function(){var e=Number(this.$refs.input.value);this._updateModelValue(e),this.$refs.input.blur()}},{key:"_mouseWheelHandler",value:function(e){var n=this.model.value+this._stepSize*Math.sign(e.wheelDelta);this._updateInputValue(n),this._updateModelValue(n)}},{key:"_pointerLockHanderHandler",value:function(){this.shadowRoot.pointerLockElement===this.$refs.input?this._isPointerLockActive=!0:this._isPointerLockActive=!1}},{key:"_mouseMoveHandler",value:function(e){if(this._isPointerLockActive){var n=e.movementX;Math.abs(n)>100&&(n=1*Math.sign(n)),n%2==0&&(n*=.5),Math.abs(n)>0&&(this._isMouseMoved=!0);var t=this._getInputValueBasedOnMouseMovement(n);"number"==typeof this._min&&(t=Math.max(t,this._min)),"number"==typeof this._max&&(t=Math.min(t,this._max)),this._updateInputValue(t),this._updateModelValue(t)}}}]),r}(Z);window.customElements.define("dddd-number",ie);var oe="drop-area",re="TYPE_THREE",se=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: start;\n}\n\n.label {\n    height: var(--input-height);\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    line-height: var(--input-height);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.image-container {\n    position: relative;\n\n    width: 100%;\n    aspect-ratio: 16 / 9;\n\n    overflow: hidden;\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    transition: var(--input-background-color-transition);\n}\n\n.image-container:hover,\n.image-container.drop-area {\n    background-color: var(--input-background-color-hover);\n}\n\n.image-container img {\n    object-fit: cover;\n\n    width: 100%;\n    height: 100%;\n}\n\n.locked .image-container {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n\n.contain .image-container img {\n    object-fit: contain;\n}\n\n.file-input {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    border: 0;\n    outline: none;\n\n    cursor: pointer;\n}\n\n.file-input::-webkit-file-upload-button {\n    visibility: hidden;\n}\n\n.file-input::before {\n    content: '';\n\n    display: block;\n\n    width: 100%;\n    height: 100%;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Image --\x3e\n    <div class="image-container" ref="imageContainer">\n\n        \x3c!-- File input --\x3e\n        <input type="file" ref="fileInput" class="file-input" accept=".jpg,.png,.gif">\n\n    </div>\n\n</div>',model:i}))._contain=o.model.options.contain,o._previewImage=null,o._type=o._getType(),o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._addPreviewImage(this.model.value),this._contain&&this._addContainClass(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"_bindHandlers",value:function(){this._dropHandler=this._dropHandler.bind(this),this._dragEnterHandler=this._dragEnterHandler.bind(this),this._dragOverHandler=this._dragOverHandler.bind(this),this._dragLeaveHandler=this._dragLeaveHandler.bind(this),this._fileInputChangeHandler=this._fileInputChangeHandler.bind(this),this._fileLoadedHandler=this._fileLoadedHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$el.addEventListener("drop",this._dropHandler),this.$el.addEventListener("dragenter",this._dragEnterHandler),this.$el.addEventListener("dragover",this._dragOverHandler),this.$el.addEventListener("dragleave",this._dragLeaveHandler),this.$refs.fileInput.addEventListener("change",this._fileInputChangeHandler)}},{key:"_removeEventListeners",value:function(){this.$el.removeEventListener("drop",this._dropHandler),this.$el.removeEventListener("dragenter",this._dragEnterHandler),this.$el.removeEventListener("dragover",this._dragOverHandler),this.$el.removeEventListener("dragleave",this._dragLeaveHandler)}},{key:"_addContainClass",value:function(){this.$el.classList.add("contain")}},{key:"_getType",value:function(){return this.model.value.isTexture?re:"TYPE_IMAGE"}},{key:"_handleFile",value:function(e){var n=new FileReader;n.onloadend=this._fileLoadedHandler,n.readAsDataURL(e)}},{key:"_removePreviewImage",value:function(){this._previewImage&&(this.$refs.imageContainer.removeChild(this._previewImage),this._previewImage=null)}},{key:"_addPreviewImage",value:function(e){e&&(this._type===re?this.model.value.image&&(this._previewImage=document.createElement("img"),this._previewImage.src=this.model.value.image.src,this.$refs.imageContainer.appendChild(this._previewImage)):(this._previewImage=document.createElement("img"),this._previewImage.src=e,this.$refs.imageContainer.appendChild(this._previewImage)))}},{key:"_showDropArea",value:function(){this.$refs.imageContainer.classList.add(oe)}},{key:"_hideDropArea",value:function(){this.$refs.imageContainer.classList.remove(oe)}},{key:"_dropHandler",value:function(e){e.preventDefault();var n=e.dataTransfer.files[0];this._handleFile(n),this._hideDropArea()}},{key:"_dragEnterHandler",value:function(e){e.preventDefault(),this._showDropArea()}},{key:"_dragOverHandler",value:function(e){e.preventDefault()}},{key:"_dragLeaveHandler",value:function(e){this.$el.contains(e.fromElement)||this._hideDropArea()}},{key:"_fileLoadedHandler",value:function(e){var n=e.target.result;this._type===re?(this.model.value.image||(this.model.value.image=new Image),this.model.value.image.src=n,this.model.value.needsUpdate=!0,this.model.triggerOnChange()):this.model.value=n,this._removePreviewImage(),this._addPreviewImage(n)}},{key:"_fileInputChangeHandler",value:function(e){var n=this.$refs.fileInput.files[0];this._handleFile(n)}}]),r}(Z);window.customElements.define("dddd-image",se);var ae=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: center;\n}\n\n.label {\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    position: relative;\n\n    height: var(--input-height);\n    overflow: hidden;\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    user-select: none;\n\n    transition: var(--input-background-color-transition);\n}\n\n.input-container:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.locked .input-container {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n\n.select {\n    width: 100%;\n    height: 100%;\n\n    border: 0;\n    outline: 0;\n\n    padding: 0 var(--input-padding);\n\n    background: transparent;\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    appearance: none;\n}\n\n.select option {\n    color: black;\n}\n\n.arrow {\n    position: absolute;\n    top: 0;\n    right: var(--input-padding);\n    bottom: 0;\n\n    margin: auto 0;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container  --\x3e\n    <div class="input-container">\n\n        \x3c!-- Arrow --\x3e\n        <svg width="11" height="6" viewBox="0 0 11 6" class="arrow">\n            <path d="M1 1L4.83564 4.40945C5.21452 4.74624 5.78548 4.74624 6.16436 4.40945L10 1" stroke="white" fill="transparent" stroke-opacity="0.74" stroke-linecap="round"/>\n        </svg>\n        \n        \x3c!-- Select --\x3e\n        <select class="select" ref="select"></select>\n\n    </div>\n\n</div>',model:i}))._isArray=Array.isArray(o.model.options.options),o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._addOptions(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){this._updateSelectValue(this.model.value)}},{key:"_bindHandlers",value:function(){this._mouseEnterHandler=this._mouseEnterHandler.bind(this),this._selectChangeHandler=this._selectChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.select.addEventListener("mouseenter",this._mouseEnterHandler),this.$refs.select.addEventListener("change",this._selectChangeHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.select.removeEventListener("mouseenter",this._mouseEnterHandler),this.$refs.select.removeEventListener("change",this._selectChangeHandler)}},{key:"_addOptions",value:function(){var e=this.model.options.options;if(this._isArray)for(var n=0,t=e.length;n<t;n++){var i=e[n],o=document.createElement("option");o.value=i,o.textContent=i,o.selected=i===this.model.value,this.$refs.select.appendChild(o)}else for(var r in e){var s=e[r],a=document.createElement("option");a.value=r,a.textContent=r,a.selected=s===this.model.value,this.$refs.select.appendChild(a)}}},{key:"_updateSelectValue",value:function(e){this.$refs.select.value=e}},{key:"_getValue",value:function(){return this._isArray?this.$refs.select.value:this.model.options.options[this.$refs.select.value]}},{key:"_mouseEnterHandler",value:function(){Q.set(this.model.value)}},{key:"_selectChangeHandler",value:function(){this.model.value=this._getValue(),this.$refs.select.blur()}}]),r}(Z);window.customElements.define("dddd-dropdown",ae);var le=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: center;\n}\n\n.label {\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    position: relative;\n\n    height: var(--input-height);\n    overflow: hidden;\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    user-select: none;\n\n    transition: var(--input-background-color-transition);\n}\n\n.input-container:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.locked .input-container {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n\n.checkbox {\n    appearance: none;\n\n    display: block;\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n\n    margin: 0;\n    padding: 0 var(--input-padding);\n\n    outline: none;\n\n    cursor: pointer;\n}\n\n.checkbox:after {\n    content: '';\n\n    display: block;\n    box-sizing: border-box;\n\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 10px;\n\n    width: 16px;\n    height: 16px;\n\n    margin: auto 0;\n\n    border-radius: 50%;\n    border: 1px solid var(--input-highlight-color);\n}\n\n.checkbox:checked:after {\n    background: var(--input-highlight-color);\n\n    border: 0;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container  --\x3e\n    <div class="input-container">\n\n        \x3c!-- Checkbox --\x3e\n        <input type="checkbox" class="checkbox" ref="checkbox">\n\n    </div>\n\n</div>',model:i}))._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._updateChecked(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){this._updateChecked()}},{key:"_bindHandlers",value:function(){this._checkboxChangeHandler=this._checkboxChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.checkbox.addEventListener("change",this._checkboxChangeHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.checkbox.removeEventListener("change",this._checkboxChangeHandler)}},{key:"_updateChecked",value:function(){this.$refs.checkbox.checked=this.model.value}},{key:"_checkboxChangeHandler",value:function(){this.model.value=this.$refs.checkbox.checked}}]),r}(Z);window.customElements.define("dddd-checkbox",le);var ue=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    transition: background-color 0.15s;\n}\n\n.button {\n    width: calc(100% - var(--label-width));\n    height: var(--input-height);\n\n    padding: 0 var(--input-padding);\n    margin-left: var(--label-width);\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    background-color: var(--input-highlight-color);\n\n    border: 0;\n    border-radius: var(--input-border-radius);\n    outline: none;\n\n    transition: var(--input-background-color-transition);\n\n    cursor: pointer;\n}\n\n.button:hover {\n    background-color: rgba(77, 83, 217, 1);\n    background-color: var(--input-highlight-color-hover);\n}\n\n.full-width .button {\n    width: 100%;\n\n    margin-left: 0;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Button --\x3e\n    <button class="button" ref="button">{{ label }}</button>\n\n</div>',model:i}))._isFullWidth=o.model.options.fullWidth||!1,o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._isFullWidth&&this._addFullWidthClass(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"_bindHandlers",value:function(){this._clickHandler=this._clickHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.button.addEventListener("click",this._clickHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.button.removeEventListener("click",this._clickHandler)}},{key:"_addFullWidthClass",value:function(){this.$el.classList.add("full-width")}},{key:"_clickHandler",value:function(){this.model.value="click"}}]),r}(Z);window.customElements.define("dddd-button",ue);var de="TYPE_THREE",ce="TYPE_STRING",he="error",pe=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:".component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: center;\n}\n\n.label {\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    display: grid;\n    position: relative;\n\n    grid-template-columns: 27px calc(100% - 20px);\n    align-items: center;\n\n    height: var(--input-height);\n    overflow: hidden;\n\n    padding: 0 var(--input-padding) 0 5px;\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n\n    background-color: var(--input-background-color);\n\n    border-radius: var(--input-border-radius);\n\n    transition: var(--input-background-color-transition);\n}\n\n.input-container:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n.component.error .input-container {\n    background-color: var(--input-background-color-error);\n}\n\n.color {\n    width: 20px;\n    height: 20px;\n\n    margin: 0;\n    padding: 0;\n\n    background: transparent;\n\n    border: 0;\n    outline: 0;\n\n    appearance: none;\n    cursor: pointer;\n}\n\n.color::-webkit-color-swatch-wrapper {\n    padding: 0;\n}\n\n.color::-webkit-color-swatch {\n    border: none;\n    border-radius: 4px;\n}\n\n.color-string {\n    background: transparent;\n\n    border: 0;\n    outline: 0;\n\n    color: var(--input-text-color);\n}\n\n/* .alpha {\n    color: var(--input-text-color);\n    text-align: right;\n} */\n",template:'<div class="component">\n\n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container  --\x3e\n    <div class="input-container">\n\n        \x3c!-- Color input --\x3e\n        <input type="color" class="color" ref="color">\n\n        \x3c!-- Color string --\x3e\n        <input type="text" class="color-string" ref="colorString">\n\n        \x3c!-- Alpha --\x3e\n        \x3c!-- <span class="alpha">100%</span> --\x3e\n\n    </div>\n\n</div>\n',model:i}))._type=o._getType(),o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){var e=this._getValue();this._setColorValue(e),this._setColorString(e),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"_bindHandlers",value:function(){this._mouseEnterHandler=this._mouseEnterHandler.bind(this),this._inputChangeHandler=this._inputChangeHandler.bind(this),this._colorStringFocusHandler=this._colorStringFocusHandler.bind(this),this._colorStringBlurHandler=this._colorStringBlurHandler.bind(this),this._colorStringKeyUpHandler=this._colorStringKeyUpHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this.$refs.color.addEventListener("mouseenter",this._mouseEnterHandler),this.$refs.color.addEventListener("input",this._inputChangeHandler),this.$refs.colorString.addEventListener("focus",this._colorStringFocusHandler),this.$refs.colorString.addEventListener("blur",this._colorStringBlurHandler),this.$refs.colorString.addEventListener("keyup",this._colorStringKeyUpHandler)}},{key:"_removeEventListeners",value:function(){this.$refs.color.removeEventListener("mouseenter",this._mouseEnterHandler),this.$refs.color.removeEventListener("input",this._inputChangeHandler),this.$refs.colorString.removeEventListener("focus",this._colorStringFocusHandler),this.$refs.colorString.removeEventListener("blur",this._colorStringBlurHandler),this.$refs.colorString.removeEventListener("keyup",this._colorStringKeyUpHandler)}},{key:"_getType",value:function(){var e=this.model.value;return e.isColor?de:this._isHex(e)?"TYPE_HEX":ce}},{key:"_getValue",value:function(){switch(this._type){case de:return"#".concat(this.model.value.getHexString());case ce:return this._convertColorNameToHex(this.model.value);default:return this.model.value}}},{key:"_setColorValue",value:function(e){this.$refs.color.value=e}},{key:"_setColorString",value:function(e){this.$refs.colorString.value=e}},{key:"_setModelValue",value:function(e){this._type===de?(this.model.value.set(e),"function"==typeof this.model.options.onChange&&this.model.options.onChange(this._value)):this.model.value=e}},{key:"_updateValueFromStringInput",value:function(){var e=this.$refs.colorString.value;"#"!==e.charAt(0)&&(e="#"+e),this._isHex(e)?(this._hideError(),this._setColorString(e),this._setModelValue(e),this._setColorValue(e)):(this._showError(),this._setColorValue("#000000"))}},{key:"_showError",value:function(){this.$el.classList.add(he)}},{key:"_hideError",value:function(){this.$el.classList.remove(he)}},{key:"_isHex",value:function(e){return/^#([0-9A-F]{3}){1,2}$/i.test(e)}},{key:"_convertColorNameToHex",value:function(e){var n=document.createElement("canvas").getContext("2d");return n.fillStyle=e,n.fillStyle}},{key:"_mouseEnterHandler",value:function(){Q.set(this.$refs.colorString.value)}},{key:"_inputChangeHandler",value:function(){var e=this.$refs.color.value;this._setModelValue(e),this._setColorString(e),this._hideError(),Q.set(e)}},{key:"_colorStringFocusHandler",value:function(){this.$refs.colorString.select()}},{key:"_colorStringBlurHandler",value:function(){this._updateValueFromStringInput()}},{key:"_colorStringKeyUpHandler",value:function(e){13===e.keyCode&&(this._updateValueFromStringInput(),this.$refs.colorString.blur())}}]),r}(Z);window.customElements.define("dddd-color",pe);var ve=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: start;\n\n    transition: background-color 0.15s;\n}\n\n.label {\n    height: var(--input-height);\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    line-height: var(--input-height);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    display: grid;\n\n    grid-template-columns: repeat(3, 1fr);\n    gap: var(--component-row-gap);\n}\n\n.input {\n    width: 100%;\n    height: var(--input-height);\n\n    padding: 0 var(--input-padding);\n\n    font-family: var(--font);\n    font-size: var(--input-font-size);\n    font-weight: var(--input-font-weight);\n    color: var(--input-text-color);\n\n    background-color: var(--input-background-color);\n\n    border: 0;\n    border-radius: var(--input-border-radius);\n    outline: none;\n\n    transition: var(--input-background-color-transition);\n\n    cursor: ew-resize;\n}\n\n.input:hover {\n    background-color: var(--input-background-color-hover);\n}\n\n\n.locked .input {\n    opacity: 0.6;\n\n    pointer-events: none;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container --\x3e\n    <div class="input-container" ref="inputContainer"></div>\n\n</div>',model:i}))._stepSize=o.model.options.stepSize||.01,o._decimalPlaces=o._getDecimalPlaces(o._stepSize),o._activeInput=null,o._isPointerLockActive=!1,o._inputs=[],o._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._createInputs(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){this._updateAllInputValues(this.model.value)}},{key:"_bindHandlers",value:function(){this._mouseEnterHandler=this._mouseEnterHandler.bind(this),this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._changeHandler=this._changeHandler.bind(this),this._pointerLockHanderHandler=this._pointerLockHanderHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this)}},{key:"_setupEventListeners",value:function(){for(var e=0,n=this._inputs.length;e<n;e++)this._inputs[e].addEventListener("mouseenter",this._mouseEnterHandler);this.$el.addEventListener("mousedown",this._mouseDownHandler),this.$el.addEventListener("mouseup",this._mouseUpHandler),this.$el.addEventListener("change",this._changeHandler),document.addEventListener("pointerlockchange",this._pointerLockHanderHandler),document.addEventListener("mousemove",this._mouseMoveHandler)}},{key:"_removeEventListeners",value:function(){for(var e=0,n=this._inputs.length;e<n;e++)this._inputs[e].removeEventListener("mouseenter",this._mouseEnterHandler);this.$el.removeEventListener("mousedown",this._mouseDownHandler),this.$el.removeEventListener("mouseup",this._mouseUpHandler),this.$el.removeEventListener("change",this._changeHandler),document.removeEventListener("pointerlockchange",this._pointerLockHanderHandler),document.removeEventListener("mousemove",this._mouseMoveHandler)}},{key:"_createInputs",value:function(){for(var e in this.model.value){var n=this.model.value[e];if("number"==typeof n){var t=document.createElement("input");t.classList.add("input"),t.value=n,this._inputs.push(t),this.$refs.inputContainer.appendChild(t)}}}},{key:"_updateModelValue",value:function(){if("Euler"===this.model.value.constructor.name)this.model.value.x=parseFloat(this._inputs[0].value),this.model.value.y=parseFloat(this._inputs[1].value),this.model.value.z=parseFloat(this._inputs[2].value);else for(var e=0,n=Object.entries(Object.entries(this.model.value));e<n.length;e++){var t=h(n[e],2),i=t[0],o=h(t[1],1)[0];this._inputs[i]&&(this.model.value[o]=parseFloat(this._inputs[i].value))}}},{key:"_getInputValueBasedOnMouseMovement",value:function(e){if(this._activeInput)return parseFloat(this._activeInput.value)+e*this._stepSize}},{key:"_updateInputValue",value:function(e){this._activeInput&&(this._activeInput.value=e.toFixed(this._decimalPlaces))}},{key:"_updateAllInputValues",value:function(){for(var e=0,n=Object.entries(Object.entries(this.model.value));e<n.length;e++){var t=h(n[e],2),i=t[0],o=h(t[1],1)[0];this._inputs[i].value=this.model.value[o]}}},{key:"_getDecimalPlaces",value:function(e){var n=e.toString().split(".");return n.length>1?n[1].length:0}},{key:"_mouseEnterHandler",value:function(e){Q.set(e.target.value)}},{key:"_mouseDownHandler",value:function(e){"INPUT"===e.target.tagName&&(this._activeInput=e.target,this.$el.requestPointerLock())}},{key:"_mouseUpHandler",value:function(){this._activeInput=null,document.exitPointerLock()}},{key:"_changeHandler",value:function(){this._updateInputValue()}},{key:"_pointerLockHanderHandler",value:function(e){this.shadowRoot.pointerLockElement===this.$el?this._isPointerLockActive=!0:this._isPointerLockActive=!1}},{key:"_mouseMoveHandler",value:function(e){if(this._isPointerLockActive){var n=Math.max(Math.min(e.movementX,100),-100),t=this._getInputValueBasedOnMouseMovement(n);this._updateInputValue(t),this._updateModelValue()}}}]),r}(Z);window.customElements.define("dddd-multi-input",ve);var fe=function(e){o(r,e);var t=c(r);function r(e,i){var o;return n(this,r),(o=t.call(this,{root:e,style:"*,\n*:before,\n*:after {\n    box-sizing: border-box;\n}\n\n.component {\n    display: grid;\n\n    grid-template-columns: var(--label-width) calc(100% - var(--label-width));\n    align-items: start;\n\n    transition: background-color 0.15s;\n}\n\n.label {\n    height: var(--input-height);\n    overflow: hidden;\n\n    padding: var(--label-padding);\n\n    font-size: var(--label-font-size);\n    line-height: var(--input-height);\n    font-weight: var(--label-font-weight);\n    color: var(--label-color);\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.input-container {\n    overflow: hidden;\n\n    text-align: center;\n\n    background-color: var(--input-background-color);\n    border-radius: var(--input-border-radius);\n}\n\n.input-container canvas {\n    max-width: 100%;\n}\n",template:'<div class="component">\n    \n    \x3c!-- Label --\x3e\n    <span class="label">{{ label }}</span>\n\n    \x3c!-- Input container --\x3e\n    <div class="input-container" ref="inputContainer"></div>\n\n</div>',model:i}))._bindHandlers(),o}return i(r,[{key:"connected",value:function(){this._addCanvas(),this._setupEventListeners()}},{key:"destroyed",value:function(){this._removeEventListeners()}},{key:"onListen",value:function(){}},{key:"_bindHandlers",value:function(){}},{key:"_setupEventListeners",value:function(){}},{key:"_removeEventListeners",value:function(){}},{key:"_addCanvas",value:function(){this.$refs.inputContainer.appendChild(this.model.options.canvas)}}]),r}(Z);window.customElements.define("dddd-canvas",fe);var _e={slider:ne,text:te,number:ie,image:se,dropdown:ae,checkbox:le,button:ue,color:pe,multiInput:ve,canvas:fe},ge=function(){function e(t){var i=t.root;n(this,e),this._root=i,this._components=[],this._bindHandlers(),this._setupEventListeners()}return i(e,[{key:"destroy",value:function(){this._destroyComponents(),this._removeEventListeners()}},{key:"create",value:function(e){J.addComponent(e)}},{key:"remove",value:function(e){this._root.layout.getContainer(e.container).removeChild(e),e.destroy()}},{key:"update",value:function(e){this._getById(e.id).model.value=e.value}},{key:"updateObjects",value:function(e){for(var n,t,i=0,o=e.length;i<o;i++)(n=e[i]).options.listen&&(t=this._getById(n.id))&&(t.model.object=n.object)}},{key:"createElementsByGroupId",value:function(e){for(var n=J.getModelsByGroupId(e),t=0,i=n.length;t<i;t++){var o=n[t],r=o.type,s=new(0,_e[r])(this._root,o);this._components.push(s),this._addComponentToContainer(s)}}},{key:"resize",value:function(){var e,n=_(this._components);try{for(n.s();!(e=n.n()).done;){e.value.resize()}}catch(e){n.e(e)}finally{n.f()}}},{key:"removeComponents",value:function(e){for(var n,t=this,i=this,o=function(e){(function e(t){t.model&&t.model.options&&t.model.options.parent?e(t.model.options.parent):t.parent?e(t.parent):i._components.splice(i._components.indexOf(n),1)})(n=t._components[e])},r=this._components.length-1;r>=0;r--)o(r)}},{key:"_bindHandlers",value:function(){this._tickHandler=this._tickHandler.bind(this)}},{key:"_setupEventListeners",value:function(){R.add(this._tickHandler)}},{key:"_removeEventListeners",value:function(){R.remove(this._tickHandler)}},{key:"_addComponentToContainer",value:function(e){var n=e.model.options.container;n&&this._root.layout.getParent(n).content.appendChild(e);var t=e.model.options.parent;t&&t.content.appendChild(e);this._root.layout.resize()}},{key:"_getById",value:function(e){var n,t=_(this._components);try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.model.id===e)return i}}catch(e){t.e(e)}finally{t.f()}}},{key:"_destroyComponents",value:function(){var e,n=_(this._components);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(e){n.e(e)}finally{n.f()}}},{key:"_tickComponents",value:function(){for(var e=0,n=this._components.length;e<n;e++)this._components[e].tick()}},{key:"_sendModelsToDevtools",value:function(){for(var e=[],n=0,t=this._components.length;n<t;n++)e.push(this._components[n].model.getData());window.postMessage({source:"dddd-page",payload:{action:"update-objects",models:e}})}},{key:"_tickHandler",value:function(){this._tickComponents()}}]),e}(),ye=function(){function t(e){var i=e.root,o=e.object,r=e.property,s=e.options,a=e.id,l=e.type,u=e.value,d=e.onChangeCallback;n(this,t),this._root=i,this._object=o||{},this._property=r,this._options=s||{},this._id=a||this._generateId(),this._parentId=this._getParentId(),this._type=l||this._detectType(),this._value=u||this._getValue(),this._onChangeCallback=d,this._options.container instanceof X&&(this._options.container=this._options.container.label),this._options.persistent&&(this._loadStoredValue(),this._storeValue())}return i(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this._object[this._property]=this._value,this.triggerOnChange(),"button"===this._type&&"click"===this._value&&"function"==typeof this._options.onClick&&this._options.onClick(e),this._root.isDevtools&&"function"==typeof this._onChangeCallback&&this._onChangeCallback(this.getData()),this._options.persistent&&this._storeValue()}},{key:"object",get:function(){return this._object},set:function(e){this._object=e}},{key:"options",get:function(){return this._options}},{key:"property",get:function(){return this._property}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"parentId",get:function(){return this._parentId}},{key:"getData",value:function(){return{object:this._object,property:this._property,options:this._removeFunctions(this._options),id:this._id,type:this._type,value:this._value}}},{key:"updateValueFromObject",value:function(){this._value=this._getValue()}},{key:"triggerOnChange",value:function(){"function"==typeof this._options.onChange&&this._options.onChange(this._value)}},{key:"_generateId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}},{key:"_getParentId",value:function(){return this._options.parent?this._options.parent.id:null}},{key:"_detectType",value:function(){if(!(this._property in this._object))throw new Error("Property '".concat(this._property,"' does not exists"));var n=this._getValue();if(n.isTexture)return"image";if(/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(n))return"image";if("canvas"===this._options.type)return"canvas";if(this._options.options&&"object"===e(this._options.options))return"dropdown";if("number"==typeof n&&"number"==typeof this._options.min&&"number"==typeof this._options.max)return"slider";if("color"===this._options.type)return"color";if(n.isColor)return"color";if(/^#[0-9A-F]{6}$/i.test(n))return"color";if("object"===e(n))return"multiInput";if("boolean"==typeof n)return"checkbox";if("number"==typeof n)return"number";if("string"==typeof n)return"text";throw new Error("Input type not detected")}},{key:"_getValue",value:function(){var n=this._object[this._property];return"object"===e(n)&&void 0!==n.value?n.value:n}},{key:"_removeFunctions",value:function(n){var t=JSON.parse(JSON.stringify(n));return function n(t){for(var i in t)"object"===e(t[i])&&null!==t[i]?n(t[i]):"function"==typeof t[i]&&delete t[i]}(t),t}},{key:"_loadStoredValue",value:function(){var e="component.".concat(this._options.parent.label,".").concat(this._property),n=q.get(e,"value");void 0!==n&&(this.value=n)}},{key:"_storeValue",value:function(){var e="component.".concat(this._options.parent.label,".").concat(this._property);q.set(e,{value:this._value})}}]),t}(),me=function(){function e(t){n(this,e),this._root=t.root,this._onLayerChangeCallback=t.onLayerChange,this._wrapper=t.wrapper,this._collapseGroups=t.collapseGroups,this._isVisible=!0,this._groups=[],this._container=this._createContainer(),this._header=this._createHeader(),this._global=this._createGlobal(),this._navigation=this._createNavigation(),this._layers=this._createLayers(),this._components=this._createComponents(),void 0===q.get("visiblity","visible")?t.minimized&&this._hide():q.get("visiblity","visible")||this._hide(),this._bindHandlers(),this._setupEventListeners()}return i(e,[{key:"destroy",value:function(){this._container.destroy(),this._navigation.destroy(),this._layers.destroy(),this._components.destroy(),this._removeContainerElement()}},{key:"components",get:function(){return this._components}},{key:"stats",get:function(){return this._stats}},{key:"addLayer",value:function(e,n){this._layers.remove("default"),this._navigation.add(e,n);var t=this._layers.add(e);return this._layers.resize(),J.addLayer(e),this._header.resize(),this._setLayersHeight(),t}},{key:"removeLayer",value:function(e){this._navigation.remove(e),this._layers.remove(e),J.removeLayer(e),this._components.removeComponents(e),this._header.resize(),this._setLayersHeight()}},{key:"gotoLayer",value:function(e){var n=this._layers.getIndexByLabel(e);this._navigation.goto(n),this._layers.goto(n),this._components.resize()}},{key:"addGroup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.parent?n.parent:this.getParent(n.container||"default"),i=new X({root:this._root,layout:this,collapseGroups:this._collapseGroups,parent:t,label:e,options:n});return t.content.appendChild(i),this._groups.push(i),this._layers.resize(),J.addGroup(i.id,e,n),this._global.resize(),i}},{key:"removeGroup",value:function(e){var n=this._getGroupById(e);n.parent.content.removeChild(n),this._groups.splice(this._groups.indexOf(n),1),this._layers.resize(),J.removeGroup(e)}},{key:"addComponent",value:function(e){var n=e.object,t=e.property,i=e.options,o=e.id,r=e.type,s=e.onChangeCallback,a=new ye({root:this._root,object:n,property:t,options:i,id:o,type:r,onChangeCallback:s});return this._components.create(a)}},{key:"getLayer",value:function(e){return this._layers.get(e)}},{key:"getParent",value:function(e){if("Global"===e)return this._global;var n=this._layers.get(e);if(n)return n;var t=this._getGroupByLabel(e);return t||void 0}},{key:"remove",value:function(){document.body.removeChild(this._container)}},{key:"resize",value:function(){this._layers.resize(),this._components.resize(),this._global.resize(),this._setLayersHeight()}},{key:"toggleVisibility",value:function(){this._isVisible?this._hide():this._show()}},{key:"_bindHandlers",value:function(){this._navigationSwitchHandler=this._navigationSwitchHandler.bind(this),this._keyUpHandler=this._keyUpHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this._navigation.addEventListener("switch",this._navigationSwitchHandler),window.addEventListener("keyup",this._keyUpHandler)}},{key:"_removeEventListeners",value:function(){this._navigation.addEventListener("switch",this._navigationSwitchHandler),window.addEventListener("keyup",this._keyUpHandler)}},{key:"_createContainer",value:function(){var e=new A({root:this._root,wrapper:this._wrapper});return this._wrapper?this._wrapper.appendChild(e):document.body.appendChild(e),e}},{key:"_createHeader",value:function(){var e=new j({root:this._root});return this._container.addElement(e),e}},{key:"_createGlobal",value:function(){var e=new G({root:this._root});return this._container.addElement(e),e}},{key:"_createNavigation",value:function(){var e=new U({root:this._root});return this._header.addElement(e),e}},{key:"_createStats",value:function(){var e=new F({root:this._root});return this._header.addElement(e),e}},{key:"_createLayers",value:function(){var e=new K({root:this._root});return this._container.addElement(e),e}},{key:"_createComponents",value:function(){return new ge({root:this._root,layout:this})}},{key:"_getGroupById",value:function(e){var n,t=_(this._groups);try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id===e)return i}}catch(e){t.e(e)}finally{t.f()}}},{key:"_getGroupByLabel",value:function(e){var n,t=_(this._groups);try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.label===e)return i}}catch(e){t.e(e)}finally{t.f()}}},{key:"_getGroupContainer",value:function(e,n){var t;if(n){if(!(t=this._layers.get(n)))throw new Error("Layer '".concat(n,"' not found"))}else{if(!this._layers.isEmpty())throw new Error("No 'container' defined for group '".concat(e,"'"));t=this._layers.add()}return t}},{key:"_removeContainerElement",value:function(){document.body.removeChild(this._container)}},{key:"_setLayersHeight",value:function(){if(!this._wrapper){var e=this._container.height-this._header.height-this._global.height;this._layers.setHeight(e)}}},{key:"_show",value:function(){this._container.show(),this._layers.show(),this._navigation.show(),this._global.show(),this._layers.resize(),this._components.resize(),this._isVisible=!0,q.set("visiblity",{visible:this._isVisible})}},{key:"_hide",value:function(){this._container.hide(),this._layers.hide(),this._navigation.hide(),this._global.hide(),this._layers.resize(),this._components.resize(),this._isVisible=!1,q.set("visiblity",{visible:this._isVisible})}},{key:"_navigationSwitchHandler",value:function(e){if(this._layers.goto(e.detail.index),this._components.resize(),"function"==typeof this._onLayerChangeCallback){var n=this._layers.getByIndex(e.detail.index).label;this._onLayerChangeCallback(n)}}},{key:"_keyUpHandler",value:function(e){67===e.keyCode&&Q.copyToClipboard()}}]),e}(),be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this._isDevtools=t.devtools,this._isMinimized=t.minimized||!1,this._collapseGroups=t.collapseGroups,this._onChangeCallback=t.onChange,this._onLayerChangeCallback=t.onLayerChange,this._wrapper=t.wrapper,this._layout=this._createLayout(),this._bindHandlers(),this._setupEventListeners()}return i(e,[{key:"destroy",value:function(){this._layout.destroy(),this._removeEventListeners()}},{key:"isDevtools",get:function(){return this._isDevtools}},{key:"layout",get:function(){return this._layout}},{key:"stats",get:function(){return this._layout.stats}},{key:"container",get:function(){return this._container}},{key:"add",value:function(e,n,t){return this._layout.addComponent({object:e,property:n,options:t})}},{key:"remove",value:function(e){}},{key:"addButton",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.label=e,this._layout.addComponent({options:n,type:"button"})}},{key:"addCanvas",value:function(e){return this._layout.addComponent({options:e,type:"canvas"})}},{key:"addLayer",value:function(e,n){return this._layout.addLayer(e,n)}},{key:"removeLayer",value:function(e){this._layout.removeLayer(e)}},{key:"gotoLayer",value:function(e){this._layout.gotoLayer(e)}},{key:"addGroup",value:function(e,n){return this._layout.addGroup(e,n)}},{key:"removeGroup",value:function(e){return this._layout.removeGroup(e)}},{key:"createLayoutFromModel",value:function(e,n){var t,i=_(e.layers);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.createLayer(o)}}catch(e){i.e(e)}finally{i.f()}var r,s=_(e.groups);try{for(s.s();!(r=s.n()).done;){var a=r.value;this.createGroup(a.label,a.options)}}catch(e){s.e(e)}finally{s.f()}var l,u=_(e.components);try{for(u.s();!(l=u.n()).done;){var d=l.value;this._layout.createComponent({object:d.object,property:d.property,options:d.options,id:d.id,type:d.type,onChangeCallback:this._onChangeCallback})}}catch(e){u.e(e)}finally{u.f()}"function"==typeof n&&n()}},{key:"isLayoutSidebar",value:function(){return!this._isDevtools}},{key:"showStats",value:function(){}},{key:"toggleVisibility",value:function(){this._layout.toggleVisibility()}},{key:"_bindHandlers",value:function(){this._messageHandler=this._messageHandler.bind(this)}},{key:"_setupEventListeners",value:function(){window.addEventListener("message",this._messageHandler)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("message",this._messageHandler)}},{key:"_createLayout",value:function(){return new me({root:this,onLayerChange:this._onLayerChangeCallback,minimized:this._isMinimized,collapseGroups:this._collapseGroups,wrapper:this._wrapper})}},{key:"_sendLayoutModel",value:function(){var e=J.get();window.postMessage({source:"dddd-page",payload:{action:"setup",layoutModel:e}})}},{key:"_messageHandler",value:function(e){var n=e.data.source,t=e.data.payload;if("dddd-devtools-proxy"===n&&t)switch(t.action){case"init":this._sendLayoutModel();break;case"setup-complete":this._layout.remove();break;case"change":this._layout.components.update(t.modelData)}if(this._isDevtools&&"dddd-page"===n&&t&&"update-objects"===t.action)t.models[0]}}]),e}();return be}));
